/*!
 * jquery.sumoselect - v2.1.0
 * http://hemantnegi.github.io/jquery.sumoselect
 * 2014-04-08
 *
 * Copyright 2015 Hemant Negi
 * Email : hemant.frnz@gmail.com
 * Compressor http://refresh-sf.com/
 */
(function(n){"namespace sumo";n.fn.SumoSelect=function(t){var r=n.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,search:!0,searchText:"Search...",noMatch:"<button class='btn btn-success' type='button' onclick=$('#Assigned')[0].sumo.add('{0}',0);><b>If Not found (Add):<\/b> '{0}'<\/button>",prefix:"",locale:["OK","Cancel","Select All"],up:!1},t),u=this.each(function(){var t=this;!this.sumo&&n(this).is("select")&&(this.sumo={E:n(t),is_multi:n(t).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var t=this;if(t.E.wrap('<div class="SumoSelect" tabindex="0">'),t.select=t.E.parent(),t.caption=n("<span>"),t.CaptionCont=n('<p class="CaptionCont"><label><i><\/i><\/label><\/p>').addClass("SelectBox").attr("style",t.E.attr("style")).prepend(t.caption),t.select.append(t.CaptionCont),t.E.attr("disabled")&&t.select.addClass("disabled").removeAttr("tabindex"),r.outputAsCSV&&t.is_multi&&t.E.attr("name")&&(t.select.append(n('<input class="HEMANT123" type="hidden" />').attr("name",t.E.attr("name")).val(t.getSelStr())),t.E.removeAttr("name")),t.isMobile()&&!r.forceCustomRendering){t.setNativeMobile();return}t.select.addClass(t.E.attr("class"));t.E.addClass("SumoUnder").attr("tabindex","-1");t.optDiv=n('<div class="optWrapper '+(r.up?"up":"")+'">');t.floatingList();t.optDiv.append('<ul class="options">');r.selectAll&&t.selAll();r.search&&t.Search();n(t.E.children("option")).each(function(i,r){r=n(r);t.createLi(r)});t.is_multi&&t.multiSelelect();t.select.append(t.optDiv);t.basicEvents();t.selAllState()},createLi:function(t,i){var r=this;t.attr("value")||t.attr("value",t.val());li=n('<li data-val="'+t.val()+'"><label>'+t.text()+"<\/label><\/li>");r.is_multi&&li.prepend("<span><i><\/i><\/span>");t[0].disabled&&(li=li.addClass("disabled"));r.onOptClick(li);return t[0].selected&&li.addClass("selected"),t.attr("class")&&li.addClass(t.attr("class")),ul=r.optDiv.children("ul.options"),typeof i=="undefined"?ul.append(li):ul.children("li").eq(i).before(li),li},getSelStr:function(){return sopt=[],this.E.children("option:selected").each(function(){sopt.push(n(this).val())}),sopt.join(r.csvSepChar)},multiSelelect:function(){var t=this;t.optDiv.addClass("multiple");t.okbtn=n('<p class="btnOk">'+r.locale[0]+"<\/p>").click(function(){r.triggerChangeCombined&&(changed=!1,t.E.children("option:selected").length!==t.Pstate.length?changed=!0:t.E.children("option:selected").each(function(){t.Pstate.indexOf(n(this).val())<0&&(changed=!0)}),changed&&(t.E.trigger("change"),t.mob&&t.E.trigger("click"),t.setText()));t.hideOpts()});t.cancelBtn=n('<p class="btnCancel">'+r.locale[1]+"<\/p>").click(function(){t._cnbtn();t.hideOpts()});t.optDiv.append(n('<div class="MultiControls">').append(t.okbtn).append(t.cancelBtn))},_cnbtn:function(){var n=this;for(n.E.children("option:selected").each(function(){this.selected=!1}),n.optDiv.find("li.selected").removeClass("selected"),i=0;i<n.Pstate.length;i++)n.E.children('option[value="'+n.Pstate[i]+'"]')[0].selected=!0,n.optDiv.find('li[data-val="'+n.Pstate[i]+'"]').addClass("selected");n.selAllState()},selAll:function(){var t=this;if(t.is_multi){t.chkAll=n("<i>");t.selAll=n('<p class="select-all"><label>'+r.locale[2]+"<\/label><\/p>").prepend(n("<span><\/span>").append(t.chkAll));t.chkAll.on("click",function(){t.selAll.toggleClass("selected");t.optDiv.find("ul.options li").not(".hidden").each(function(i,r){r=n(r);t.selAll.hasClass("selected")?r.hasClass("selected")||r.trigger("click"):r.hasClass("selected")&&r.trigger("click")})});t.optDiv.prepend(t.selAll)}},Search:function(){var t=this,u=t.CaptionCont.addClass("search"),i=n('<p class="no-match">');t.ftxt=n('<input type="text" class="search-txt" value="" placeholder="'+r.searchText+'">').on("click",function(n){n.stopPropagation()});u.append(t.ftxt);t.optDiv.children("ul").after(i);t.ftxt.on("keyup.sumo",function(){var u=t.optDiv.find("ul.options li").each(function(i,r){r=n(r);r.text().toLowerCase().indexOf(t.ftxt.val().toLowerCase())>-1?r.removeClass("hidden"):r.addClass("hidden")}).not(".hidden");i.html(r.noMatch.replace(/\{0\}/g,t.ftxt.val())).toggle(!u.length);t.selAllState()})},selAllState:function(){var t=this,i,u;r.selectAll&&(i=0,u=0,t.optDiv.find("ul.options li").not(".hidden").each(function(t,r){n(r).hasClass("selected")&&i++;n(r).hasClass("disabled")||u++}),i===u?t.selAll.removeClass("partial").addClass("selected"):i===0?t.selAll.removeClass("selected partial"):t.selAll.addClass("partial"))},showOpts:function(){var t=this;if(!t.E.attr("disabled")){t.is_opened=!0;t.select.addClass("open");t.ftxt&&t.ftxt.focus();n(document).on("click.sumo",function(n){if(!t.select.is(n.target)&&t.select.has(n.target).length===0){if(!t.is_opened)return;t.hideOpts();t.is_multi&&r.okCancelInMulti&&t._cnbtn()}});t.is_floating&&(H=t.optDiv.children("ul").outerHeight()+2,t.is_multi&&(H=H+parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H));t.is_multi&&(t.is_floating||r.okCancelInMulti)&&(t.Pstate=[],t.E.children("option:selected").each(function(){t.Pstate.push(n(this).val())}))}},hideOpts:function(){var t=this;t.is_opened&&(t.is_opened=!1,t.select.removeClass("open").find("ul li.sel").removeClass("sel"),n(document).off("click.sumo"),t.select.focus())},setOnOpen:function(){var n=this,t=n.optDiv.find("ul li:not(.hidden)").eq(r.search?0:n.E[0].selectedIndex);n.optDiv.find("ul li.sel").removeClass("sel");t.addClass("sel");n.showOpts()},nav:function(n){var r=this,f,o="li:not(.disabled, .hidden)",t=r.optDiv.find("ul li.sel:not(.hidden)");if(r.is_opened&&t.length){if(f=n?t.prevAll(o):t.nextAll(o),!f.length)return;t.removeClass("sel");t=f.first().addClass("sel");var i=r.optDiv.find("ul"),e=i.scrollTop(),u=t.position().top+e;u>=e+i.height()-t.outerHeight()&&i.scrollTop(u-i.height()+t.outerHeight());u<e&&i.scrollTop(u)}else r.setOnOpen()},basicEvents:function(){var t=this;t.CaptionCont.click(function(n){t.E.trigger("click");t.is_opened?t.hideOpts():t.showOpts();n.stopPropagation()});t.select.on("keydown.sumo",function(n){switch(n.which){case 38:t.nav(!0);break;case 40:t.nav(!1);break;case 32:if(t.ftxt.is(n.target))return;case 13:t.is_opened?t.optDiv.find("ul li.sel").trigger("click"):t.setOnOpen();break;case 9:case 27:t.is_multi&&r.okCancelInMulti&&t._cnbtn();t.hideOpts();return;default:return}n.preventDefault()});n(window).on("resize.sumo",function(){t.floatingList()})},onOptClick:function(t){var i=this;t.click(function(){var t=n(this);t.hasClass("disabled")||(txt="",i.is_multi?(t.toggleClass("selected"),i.E.children('option[value="'+t.data("val")+'"]')[0].selected=t.hasClass("selected"),i.selAllState()):(t.parent().find("li.selected").removeClass("selected"),t.toggleClass("selected"),i.E.val(t.attr("data-val"))),i.is_multi&&r.triggerChangeCombined&&(i.is_floating||r.okCancelInMulti)||(i.setText(),i.E.trigger("change").trigger("click")),i.is_multi||i.hideOpts())})},setText:function(){var t=this;if(t.placeholder="",t.is_multi){for(sels=t.E.children(":selected").not(":disabled"),i=0;i<sels.length;i++)if(i+1>=r.csvDispCount&&r.csvDispCount){t.placeholder=sels.length==t.E.find("option").length&&r.captionFormatAllSelected?r.captionFormatAllSelected.replace(/\{0\}/g,sels.length):r.captionFormat.replace(/\{0\}/g,sels.length);break}else t.placeholder+=n(sels[i]).text()+", ";t.placeholder=t.placeholder.replace(/,([^,]*)$/,"$1")}else t.placeholder=t.E.children(":selected").not(":disabled").text();return is_placeholder=!1,t.placeholder||(is_placeholder=!0,t.placeholder=t.E.attr("placeholder"),t.placeholder||(t.placeholder=t.E.children("option:disabled:selected").text())),t.placeholder=t.placeholder?r.prefix+" "+t.placeholder:r.placeholder,t.caption.html(t.placeholder),csvField=t.select.find("input.HEMANT123"),csvField.length&&csvField.val(t.getSelStr()),is_placeholder?t.caption.addClass("placeholder"):t.caption.removeClass("placeholder"),t.placeholder},isMobile:function(){for(var t=navigator.userAgent||navigator.vendor||window.opera,n=0;n<r.nativeOnDevice.length;n++)if(t.toString().toLowerCase().indexOf(r.nativeOnDevice[n].toLowerCase())>0)return r.nativeOnDevice[n];return!1},setNativeMobile:function(){var n=this;n.E.addClass("SelectClass");n.mob=!0;n.E.change(function(){n.setText()})},floatingList:function(){var t=this;t.is_floating=n(window).width()<=r.floatWidth;t.optDiv.toggleClass("isFloating",t.is_floating);t.is_floating||t.optDiv.css("height","");t.optDiv.toggleClass("okCancelInMulti",r.okCancelInMulti&&!t.is_floating)},vRange:function(n){var t=this;if(opts=t.E.children("option"),opts.length<=n||n<0)throw"index out of bounds";return t},toggSel:function(n,t){var i=this.vRange(t);i.E.children("option")[t].disabled||(i.E.children("option")[t].selected=n,i.mob||i.optDiv.find("ul.options li").eq(t).toggleClass("selected",n),i.setText())},toggDis:function(n,t){var i=this.vRange(t);i.E.children("option")[t].disabled=n;n&&(i.E.children("option")[t].selected=!1);i.mob||i.optDiv.find("ul.options li").eq(t).toggleClass("disabled",n).removeClass("selected");i.setText()},toggSumo:function(n){var t=this;return t.enabled=n,t.select.toggleClass("disabled",n),n?(t.E.attr("disabled","disabled"),t.select.removeAttr("tabindex")):(t.E.removeAttr("disabled"),t.select.attr("tabindex","0")),t},toggSelAll:function(t){var i=this;i.E.find("option").each(function(){i.E.find("option")[n(this).index()].disabled||(i.E.find("option")[n(this).index()].selected=t,i.mob||i.optDiv.find("ul.options li").eq(n(this).index()).toggleClass("selected",t),i.setText())});!i.mob&&(r.selectAll||r.search)&&i.selAll.removeClass("partial").toggleClass("selected",t)},reload:function(){var t=this.unload();return n(t).SumoSelect(r)},unload:function(){var n=this;return n.select.before(n.E),n.E.show(),r.outputAsCSV&&n.is_multi&&n.select.find("input.HEMANT123").length&&n.E.attr("name",n.select.find("input.HEMANT123").attr("name")),n.select.remove(),delete t.sumo,t},add:function(i,r,u){if(typeof i=="undefined")throw"No value to add";var f=this;if(opts=f.E.children("option"),typeof r=="number"&&(u=r,r=i),typeof r=="undefined"&&(r=i),opt=n("<option><\/option>").val(i).html(r),opts.length<u)throw"index out of bounds";return typeof u=="undefined"||opts.length==u?(f.E.append(opt),f.mob||f.createLi(opt)):(opts.eq(u).before(opt),f.mob||f.createLi(opt,u)),t},remove:function(n){var t=this.vRange(n);t.E.children("option").eq(n).remove();t.mob||t.optDiv.find("ul.options li").eq(n).remove();t.setText()},selectItem:function(n){this.toggSel(!0,n)},unSelectItem:function(n){this.toggSel(!1,n)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(n){this.toggDis(!0,n)},enableItem:function(n){this.toggDis(!1,n)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){var n=this;return n.createElems(),n.setText(),n}},t.sumo.init())});return u.length==1?u[0]:u}})(jQuery);
//# sourceMappingURL=jquery.sumoselect.min.js.map
